<h1 align="center"> üß† AI-Powered Backend for an Intelligent and Reflective Journaling Experience ‚ú® </h1>

<p align="center">
  <img src="https://img.shields.io/badge/Python-3.9+-3776AB?style=for-the-badge&logo=python&logoColor=white" alt="Python">
  <img src="https://img.shields.io/badge/FastAPI-005571?style=for-the-badge&logo=fastapi" alt="FastAPI">
  <img src="https://img.shields.io/badge/LangChain-4A90E2?style=for-the-badge" alt="LangChain">
  <img src="https://img.shields.io/badge/OpenAI-412991?style=for-the-badge&logo=openai&logoColor=white" alt="OpenAI">
  <img src="https://img.shields.io/badge/Pydantic-E92063?style=for-the-badge" alt="Pydantic">
</p>

## üí° Project Motivation

Traditional journaling is a powerful tool for self-reflection, but it's often a one-way conversation. This project introduces **MindWeaver API**, a backend service designed to transform journaling into a dynamic, interactive dialogue. It acts as an intelligent companion that not only stores your thoughts but also helps you understand, visualize, and deepen them.

By leveraging advanced AI models for multimodal analysis, illustration generation, and compassionate coaching, this API provides the foundation for a truly next-generation journaling application. The goal is to turn a simple diary into a powerful, responsive partner for personal growth and creativity.

<p align="center">
  <img src="./assets/illustration.gif" width="500" alt="Project Demo">
  <br>
  <em>*generated by AI</em>
</p>

## üí° The Core Features: An AI-Powered Reflective Partner

This API is more than just a single tool; it's a suite of interconnected services designed to act as a true partner in your reflective journey. Each feature is built to help you engage with your thoughts in a new and meaningful way, moving beyond simple text storage to active, insightful self-exploration. 

<p align="center">
  <img src="./Assets/section-a.png" width="1200" alt="Mindweaver Feature">
  <br>
  <em>MindWeaver API Main Feature.</em>
</p>

Below is a breakdown of the key capabilities that power this unique experience, helping you to understand the emotion behind your words, visualize your memories, and deepen your self-reflection.

### üß† Multimodal Emotion & Context Analysis

<p align="center">
  <img src="./Assets/subsection-a.png" width=1200 alt="Emotion Analysis Pipeline">
  <br>
  <em>The data flow for analyzing and classifying a journal entry.</em>
</p>

This core feature provides a deep, contextual understanding of each journal entry. Instead of just scanning for keywords, the API acts as a discerning reader, analyzing the user's text, the content of their images, and any associated video emotions to grasp the complete picture.

The process begins by constructing a "super document" that combines all available information. This rich document is then converted into a high-dimensional vector using OpenAI's advanced embedding models, capturing its true semantic meaning. This vector is then compared against a pre-computed library of emotions and contextual tags using cosine similarity to find the most accurate matches.

The result is a far more nuanced and accurate classification than traditional methods. For each entry, the API returns a primary emotion (e.g., *"a moment of peacefulness and calm"*) and a set of relevant tags (e.g., *"Family," "Personal Growth"*) that help the user track and understand their emotional patterns and life topics over time.

### üé® AI-Powered Illustration Generation

<p align="center">
  <img src="./Assets/subsection-b.png" width="1200" alt="Illustration Generation Pipeline">
  <br>
  <em>The multi-step LLM chain for generating an illustration from a journal entry.</em>
</p>

The MindWeaver API adds a powerful visual dimension to journaling by automatically generating a unique illustration for your entries. This feature analyzes your writing to create a piece of art that captures the essence of a specific moment, turning a simple text entry into a rich, multimedia memory.

This isn't a simple text-to-image conversion. The process uses a sophisticated multi-step LLM chain: first, it intelligently identifies the single most visually descriptive paragraph in your entire entry. Next, it extracts the key "visual essence"‚Äîsubjects, objects, setting, and actions‚Äîfrom that paragraph. Finally, these elements are assembled into a detailed prompt that guides DALL-E 3 to create a beautiful, contextually relevant illustration.

The result is a highly personalized image that serves as a unique "cover" for your memory. This makes your journal more engaging to revisit and provides a new, creative way to connect with your past experiences, capturing a feeling that words alone sometimes cannot.

### üí¨ The Compassionate Elaboration Coach

<p align="center">
  <img src="./Assets/subsection-c.png" width="1200" alt="Elaboration and Chat Flow">
  <br>
  <em>The two-phase process of suggesting an elaboration and engaging in a supportive chat.</em>
</p>

To encourage deeper self-reflection, the API includes an interactive coaching feature. It acts as a compassionate sounding board, identifying areas in your writing with potential for more detail and gently prompting you to explore those thoughts and feelings further.

The process works in two stages. First, upon receiving a journal entry, an AI coach analyzes the text to pinpoint a specific paragraph ripe for elaboration. It then formulates a gentle, open-ended question to spark further thought. If you choose to respond, the feature transitions into a short, stateful conversation, using session memory to provide context-aware, supportive follow-up questions without ever giving unsolicited advice.

This feature helps users overcome writer's block and uncover insights they might have missed on their own. By providing a safe and guided space to unpack complex emotions, it transforms the journal from a static record into an active tool for mindfulness and personal discovery.

## üõ†Ô∏è Tech Stack & Architecture

This project is built with a modern, robust stack centered around Python, leveraging powerful libraries for API development and AI integration.

### Technologies Used

* **Backend & API:**
    * **FastAPI**: A high-performance web framework for building APIs with Python.
    * **Pydantic**: Used for data validation and settings management, ensuring robust data contracts.
    * **Python 3.9+**: The core programming language powering the application.

* **AI & Machine Learning:**
    * **LangChain**: The primary framework for orchestrating LLM calls, managing prompts, and handling conversational memory.
    * **OpenAI API**: The engine for all intelligent features, utilizing models for:
        * **Text Generation (`gpt-4o-mini`)**: Powers the illustration prompting and compassionate chat.
        * **Embeddings (`text-embedding-3-large`)**: Used for the semantic analysis of journal entries.
        * **Image Generation (`dall-e-3`)**: Creates the unique illustrations.

* **Utilities:**
    * **Python-dotenv**: Manages environment variables and application secrets.
    * **CSV**: The standard library used for the simple, file-based request logging system.

## üì° API Endpoint Reference

The MindWeaver API provides a set of endpoints to handle journal analysis, illustration, and interactive coaching. The base URL is `http://127.0.0.1:8000`.

**Authentication**: All endpoints are protected and require a valid API key to be passed in the request header as `X-Api-Key`.

For full interactive documentation, please run the server and visit `http://127.0.0.1:8000/docs`.

---

### POST /classify

Analyzes a journal entry to determine its primary emotion and relevant contextual tags.

* **Request Body:**

    ```json
    {
      "entry_data": {
        "title": "My trip to bali",
        "text": "My Bali journal is a sun-drenched collection of memories..."
      },
      "media_context": {
        "video_emotion": "Happy",
        "video_confidence": 0.97,
        "images": [
          {
            "content": "base64_encoded_image_string",
            "format": "jpeg",
            "position_after_paragraph": 1
          }
        ]
      }
    }
    ```

* **Successful Response (200 OK):**

    ```json
    {
      "emotion_classification": {
        "emotion": "a feeling of joy and happiness",
        "similarity": 0.8912
      },
      "emotion_tags": [
        {
          "tags": "Travel & Adventure",
          "similarity": 0.9123
        },
        {
          "tags": "Milestones & Events",
          "similarity": 0.8854
        }
      ],
      "latency_ms": 450
    }
    ```

---

### POST /generate-illustration

Generates a unique illustration based on the most visually descriptive paragraph of a journal entry.

* **Request Body:**

    ```json
    {
      "journal_text": "But not everything was serene! I'm convinced my rental surfboard had a personal vendetta against me today...",
      "style_preference": "digital painting",
      "num_images": 1,
      "filled_paragraph": [2]
    }
    ```
    - `filled_paragraph` (Optional `List[int]`): A list of 1-based paragraph indices that already have an image placed after them. This is used to avoid placing the new illustration in an occupied slot.
---

* **Successful Response (200 OK):**

    ```json
    {
      "images": [
        "base64_encoded_image_string"
      ],
      "prompt": "Create a digital illustration in a 'digital painting' style. The scene must feature a person having a ridiculous wipeout...",
      "position_after_paragraph": 1,
      "latency_ms": 3500
    }
    ```

---

### POST /elaboration-chat

Manages the interactive coaching chat. It can either generate an initial suggestion based on the journal or handle a follow-up chat message from the user.

* **Request Body (Initial Suggestion):**

    ```json
    {
      "uuid": "user-session-12345",
      "journal_data": {
        "text": "My Bali journal is a sun-drenched collection of memories..."
      }
    }
    ```

* **Request Body (Follow-up Chat):**

    ```json
    {
      "uuid": "user-session-12345",
      "user_chat_input": "I felt a deep sense of peace in that moment."
    }
    ```

* **Successful Response (200 OK):**

    ```json
    {
      "uuid": "user-session-12345",
      "elaboration_suggestion": {
        "paragraph_index": 0,
        "strategy_used": "Sensory Details",
        "suggestion_text": "Can you describe a single, vivid memory where that specific taste of salt and the feeling of the sun's warmth were most powerful?",
        "highlight_text": "taste of salt and the warmth of the tropical sun"
      },
      "assistant_response": "Thank you for sharing that. What was it about that feeling of peace that felt so important to you?",
      "is_final_message": false
    }
    ```

## üìú License

This project is distributed under the MIT License. See the `LICENSE` file in the repository for more information.

---

## ü§ù Contributing

Contributions are what make the open-source community such an amazing place to learn, inspire, and create. Any contributions you make are **greatly appreciated**.

If you have a suggestion that would make this project better, please fork the repo and create a pull request. You can also simply open an issue with the "enhancement" tag.

1.  Fork the Project
2.  Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3.  Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4.  Push to the Branch (`git push origin feature/AmazingFeature`)
5.  Open a Pull Request

Don't forget to give the project a star! Thanks again!